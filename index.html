<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Zama Protocol IQ Master Challenge</title>
<meta name="description" content="Zama Protocol IQ Master Challenge â€” 20 questions from basic to expert on FHE and Zama architecture." />
<link rel="icon" href="data:," />
<style>
  :root{
    --zama-yellow:#FFD700;
    --soft-bg-start:#fffdf7;
    --soft-bg-end:#fff9ea;
    --card:#ffffff;
    --muted: #6b7280;
    --accent-shadow: 0 12px 30px rgba(255,183,6,0.12);
  }
  html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:#0b1220;}
  body{
    background: linear-gradient(180deg, var(--soft-bg-start) 0%, var(--soft-bg-end) 100%);
    display:flex; align-items:center; justify-content:center; padding:28px;
  }
  .wrap{width:100%;max-width:980px; position:relative; z-index:2;}
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.92));
    border-radius:18px; padding:26px; box-shadow: var(--accent-shadow); border:1px solid rgba(0,0,0,0.04);
  }
  header{display:flex; align-items:center; justify-content:space-between; gap:16px;}
  .brand{display:flex; align-items:center; gap:14px;}
  .brand img{width:56px;height:56px;border-radius:10px;object-fit:cover;border:1px solid rgba(0,0,0,0.04)}
  h1{margin:0;font-size:20px;color:#0b1220;font-weight:800;letter-spacing:0.2px;}
  .qcount{color:var(--muted); font-size:13px;}
  .progress{height:8px;background:rgba(11,18,32,0.04);border-radius:999px;margin:18px 0;overflow:hidden;}
  .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--zama-yellow),#ffd94d); width:0%; transition:width .4s ease;}
  main .question{font-size:18px;margin:14px 0 18px 0; color:#0b1220;}
  .options{display:grid; grid-template-columns:repeat(2,1fr); gap:12px;}
  .opt{
    background: #fffefc;
    border:1px solid rgba(11,18,32,0.06);
    padding:14px; border-radius:999px; display:flex; align-items:center; gap:12px; cursor:pointer;
    transition:all .14s ease; text-align:left; box-shadow: 0 4px 14px rgba(11,18,32,0.04);
  }
  .opt:hover{transform:translateY(-4px); border-color: rgba(255,183,6,0.18);}
  .opt .bullet{width:20px;height:20px;border-radius:50%; border:2px solid var(--zama-yellow); flex-shrink:0; display:inline-block;}
  .opt.disabled{opacity:.52; pointer-events:none;}
  .footer-row{display:flex; align-items:center; justify-content:space-between; margin-top:18px;}
  .btn{
    background:var(--zama-yellow); color:#0b1220; padding:10px 16px; border-radius:999px; font-weight:800; border:none; cursor:pointer;
    box-shadow: 0 8px 24px rgba(255,183,6,0.12); transition:transform .12s ease;
  }
  .btn:active{transform:translateY(1px);}
  .muted{color:var(--muted);font-size:13px;}
  .result{display:flex; gap:28px; align-items:center; justify-content:center; flex-direction:column; padding:12px;}
  .gauge-wrap{position:relative; width:220px; height:220px;}
  svg{display:block;}
  .gauge-center{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; flex-direction:column;}
  .iq-num{font-size:36px; font-weight:800; color:#0b1220; background:linear-gradient(90deg,#fff8d6,#ffd700); padding:8px 18px; border-radius:999px; box-shadow: 0 8px 20px rgba(0,0,0,0.06);}
  .iq-sub{color:#333; font-weight:700; margin-top:6px; font-size:12px;}
  .rank-badge{padding:8px 12px; background:#fff7e6; border-radius:999px; color:var(--zama-yellow); font-weight:800; border:1px solid rgba(255,183,6,0.12);}
  .share-row{display:flex; gap:10px; align-items:center;}
  .share{background:#1D9BF0; color:white; padding:10px 14px; border-radius:999px; font-weight:800; border:none; cursor:pointer;}
  .playagain{background:transparent; color:#0b1220; padding:10px 14px; border-radius:999px; border:1px solid rgba(11,18,32,0.06); cursor:pointer; font-weight:700;}
  footer{margin-top:12px; text-align:center; color:var(--muted); font-size:13px;}
  .watermark{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none; z-index:0; opacity:0.06; filter: blur(6px);}
  .watermark img{width:420px;height:420px;object-fit:contain; transform:rotate(-6deg);}
  .particles{position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden;}
  .particle{position:absolute;border-radius:50%; filter: blur(14px); opacity:.45; mix-blend-mode:screen;}

  /* Intro styles */
  .intro {
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px 12px;
  }
  .intro-card{
    width:100%;
    max-width:720px;
    background: linear-gradient(180deg,#ffffff,#fbfbfe);
    padding:36px;
    border-radius:14px;
    text-align:center;
    box-shadow: 0 10px 30px rgba(11,18,32,0.06);
    border:1px solid rgba(11,18,32,0.03);
  }
  .intro-logo{width:56px;height:56px;margin:0 auto 8px;display:block;}
  .intro-sub{color:var(--muted); font-size:13px; margin-bottom:10px;}
  .intro-title{font-size:22px;margin:8px 0 8px 0;font-weight:800;}
  .intro-desc{color:#374151; margin:10px 0 18px 0; font-size:14px; line-height:1.4;}
  .start-btn{
    background:linear-gradient(90deg,#667eea,#9f7aea);
    color:#fff; padding:10px 20px; border-radius:999px; border:none; cursor:pointer; font-weight:800;
    box-shadow: 0 8px 24px rgba(99,102,241,0.12);
  }

  @media (max-width:720px){
    .options{grid-template-columns:1fr;}
    .brand img{width:42px;height:42px;}
    .watermark img{width:320px;height:320px;}
    .gauge-wrap{width:180px;height:180px;}
    .iq-num{font-size:30px;}
    .intro-card{padding:22px;}
  }
</style>
</head>
<body>
  <div class="particles" aria-hidden="true">
    <div class="particle" style="width:260px;height:260px;left:4%;top:6%;background:radial-gradient(circle,#ffd70033,#ffd70000);animation:move 18s linear infinite;"></div>
    <div class="particle" style="width:180px;height:180px;left:72%;top:4%;background:radial-gradient(circle,#ffd70022,#ffd70000);animation:move 14s linear infinite;"></div>
    <div class="particle" style="width:220px;height:220px;left:42%;top:66%;background:radial-gradient(circle,#ffd7001a,#ffd70000);animation:move 20s linear infinite;"></div>
  </div>

  <div class="wrap">
    <div class="watermark"><img src="https://avatars.githubusercontent.com/u/57671822?s=280&v=4" alt="Zama logo" /></div>

    <div class="card" role="main" aria-labelledby="title">
      <header>
        <div class="brand">
          <img src="https://avatars.githubusercontent.com/u/57671822?s=280&v=4" alt="Zama logo" />
          <div>
            <h1 id="title">Zama Protocol IQ Master Challenge</h1>
            <!-- Removed promotional subtitle per request -->
          </div>
        </div>
        <!-- Removed the "20 Q" count for a cleaner header -->
      </header>

      <div class="progress" aria-hidden="true"><i id="prog" style="width:0%"></i></div>

      <main id="main">
        <!-- INTRO SCREEN (shown first) -->
        <div id="intro" class="intro" aria-hidden="false">
          <div class="intro-card" role="region" aria-label="Introduction">
            <img class="intro-logo" src="https://avatars.githubusercontent.com/u/57671822?s=280&v=4" alt="logo" />
            <div class="intro-sub">Test Your Knowledge</div>
            <div class="intro-title">Welcome to Zama Protocol IQ Master Challenge!</div>
            <div class="intro-desc">
              Try this interactive quiz to learn about FHE and Zama architecture.
              You will get instant feedback on each question and see your final score at the end.
            </div>
            <button id="startBtn" class="start-btn" aria-label="Start Quiz">Start Quiz</button>
          </div>
        </div>

        <!-- QUIZ (hidden until Start) -->
        <div id="quiz" style="display:none">
          <div class="question" id="question">Question text</div>
          <div class="options" id="options" aria-live="polite"></div>

          <div class="footer-row">
            <div class="muted" id="qmeta">Difficulty: â€”</div>
            <div>
              <button class="btn" id="nextBtn" disabled>Next</button>
            </div>
          </div>
        </div>

        <div id="result" style="display:none" class="result" aria-hidden="true">
          <div class="gauge-wrap" id="gwrap">
            <svg id="gauge" width="220" height="220" viewBox="0 0 120 120" aria-hidden="true"></svg>
            <div class="gauge-center">
              <div class="iq-num" id="iqNum">120</div>
              <div class="iq-sub" id="iqPct">80%</div>
            </div>
          </div>

          <div id="resultText" style="text-align:center;">
            <div style="margin-top:6px;color:#223246">You answered <strong id="correctCount">0</strong> / 20 correctly.</div>
            <div style="margin-top:6px;"><span class="rank-badge" id="rankLabel">Zama Explorer</span></div>
          </div>

          <div style="margin-top:14px;" class="share-row">
            <button class="share" id="shareBtn">Share on X</button>
            <button class="playagain" id="retryBtn">Play again</button>
          </div>
        </div>
      </main>

      <footer>
        Crafted with ðŸ’› by <strong>Zunnoorayn</strong> | Powered by Zama
      </footer>
    </div>
  </div>

<script>
/* 20 educational, mixed-level questions (pts weight: easy=1, mid=2, expert=3) */
const QUESTIONS = [
  // Easy (1pt)
  {q:"What does FHE stand for?", o:["Fast Homomorphic Encryption","Fully Homomorphic Encryption","Functional Hidden Encryption","Finite Homomorphic Encoding"], a:1, pts:1},
  {q:"What primary problem does Zama Protocol address?", o:["Faster block finality","Confidential on-chain computation","Lower gas fees","Cross-chain swaps"], a:1, pts:1},
  {q:"Which language is commonly used for encrypted contracts in Zama stack?", o:["Rust","Solidity","Python","Go"], a:1, pts:1},
  {q:"Where should sensitive data be encrypted before interacting with Zama contracts?", o:["Encrypt locally client-side","Send plaintext then encrypt on-chain","Store on IPFS then send link","Use miner encryption"], a:0, pts:1},
  {q:"Which component orchestrates ciphertext flows and access control?", o:["Miner","Gateway","Wallet","Explorer"], a:1, pts:1},

  // Intermediate (2pts)
  {q:"Why use threshold KMS with FHE keys?", o:["Speed up FHE ops","Avoid single point of decryption control","Lower gas fees","Simplify UI"], a:1, pts:2},
  {q:"What is the role of a coprocessor?", o:["Mine encrypted transactions","Run/verify heavy FHE computations off-chain","Host frontend SDK","Act as a price oracle"], a:1, pts:2},
  {q:"Which example encrypted types are used in FHEVM?", o:["euint, eint, ebool, ebytes","privuint, secretint, lockbool","sealint, sealtx","crypt_uint, crypt_bool"], a:0, pts:2},
  {q:"How do encrypted contracts maintain composability?", o:["They cannot","Via host contracts & gateways that bridge ciphertext interactions","By revealing plaintext to other contracts","Only via centralized oracles"], a:1, pts:2},
  {q:"Common FHE trade-off important for design is:", o:["Lower security","Higher compute cost and latency","Incompatibility with EVM","Impossible verification"], a:1, pts:2},
  {q:"Before encrypting inputs clients need:", o:["Miner signatures","Public encryption parameters or keys from KMS","Plaintext signatures","A new token"], a:1, pts:2},
  {q:"What reduces gas cost for ciphertext logic?", o:["Storing plaintext on-chain","Batching operations and minimizing ciphertext size","Using larger ciphertexts","Decrypt on-chain"], a:1, pts:2},

  // Expert (3pts)
  {q:"Which verification method improves coprocessor trust?", o:["No verification required","Off-chain verifiable receipts + on-chain checks","Trust-only attestation","Single-signer proofs"], a:1, pts:3},
  {q:"Why use MPC in KMS design?", o:["Faster encryption","Split trust so no single party can decrypt","Replace FHE","Reduce ciphertext size"], a:1, pts:3},
  {q:"Key risk when bridging ciphertexts across chains is:", o:["Different token standards","Replay, key mismatch, and routing attacks","Faster finality","Block size"], a:1, pts:3},
  {q:"In a confidential auction built on Zama, which holds?", o:["All bids public","Bids encrypted until reveal or settlement","Winner cannot be verified","Bids stored plaintext"], a:1, pts:3},
  {q:"Which approach makes FHE practical in production?", o:["Do everything on-chain","Offload heavy compute to coprocessors and verify on-chain","Require all users to run FHE locally","Use huge ciphertexts without batching"], a:1, pts:3},
  {q:"Correct KMS security assumption:", o:["Single operator controls keys","Threshold of independent parties must collude to decrypt","Keys are public","KMS is unnecessary"], a:1, pts:3},
  {q:"End-to-end encrypted compute flow:", o:["User encrypts â†’ Gateway routes â†’ Coprocessor computes + returns ciphertext/receipt â†’ On-chain result recorded â†’ Client decrypts via KMS cooperation","User sends plaintext â†’ Coprocessor encrypts â†’ Miner validates","KMS does all compute","User posts keys"], a:0, pts:3},
  {q:"Practical optimization to lower ciphertext costs:", o:["Always use maximum precision","Pack small values into single ciphertexts and minimize rounds","Run many small separate ops","Decrypt frequently on-chain"], a:1, pts:3}
];

let index = 0, score = 0, points = 0, selected = null;
const totalQ = QUESTIONS.length, totalPts = QUESTIONS.reduce((s,q)=>s+q.pts,0);

/* UI refs */
const qEl = document.getElementById('question');
const optsEl = document.getElementById('options');
const progEl = document.getElementById('prog');
const qmeta = document.getElementById('qmeta');
const nextBtn = document.getElementById('nextBtn');
const resultBox = document.getElementById('result');
const quizBox = document.getElementById('quiz');
const gaugeSVG = document.getElementById('gauge');
const iqNum = document.getElementById('iqNum');
const iqPct = document.getElementById('iqPct');
const correctCountEl = document.getElementById('correctCount');
const rankLabelEl = document.getElementById('rankLabel');
const shareBtn = document.getElementById('shareBtn');
const retryBtn = document.getElementById('retryBtn');

const intro = document.getElementById('intro');
const startBtn = document.getElementById('startBtn');

/* Render question */
function renderQuestion(){
  selected = null;
  nextBtn.disabled = true;
  nextBtn.innerText = (index+1 < totalQ) ? 'Next' : 'Finish';
  const item = QUESTIONS[index];
  qEl.textContent = item.q;
  optsEl.innerHTML = '';
  qmeta.textContent = `Difficulty points: ${item.pts}`;
  item.o.forEach((opt, i) => {
    const btn = document.createElement('button');
    btn.className = 'opt';
    btn.type = 'button';
    btn.innerHTML = `<span class="bullet" aria-hidden="true"></span><span style="flex:1">${opt}</span>`;
    btn.onclick = () => {
      if (selected !== null) return;
      selected = i;
      // disable all visually then highlight chosen
      Array.from(optsEl.children).forEach((c, idx) => {
        c.classList.add('disabled');
        if (idx === i) {
          c.classList.remove('disabled');
          c.style.background = 'linear-gradient(90deg,#fff8d6,#ffd700)';
          c.style.color = '#0b1220';
        }
      });
      if (i === item.a) { score++; points += item.pts; }
      nextBtn.disabled = false;
    };
    optsEl.appendChild(btn);
  });
  const percent = Math.round((index/totalQ)*100);
  progEl.style.width = percent + '%';
}

/* Start button behavior */
startBtn.addEventListener('click', ()=>{
  // hide intro, show quiz and start
  intro.style.display = 'none';
  quizBox.style.display = '';
  index = 0; score = 0; points = 0; selected = null;
  progEl.style.width = '0%';
  renderQuestion();
  window.scrollTo({top:0, behavior:'smooth'});
});

/* next */
nextBtn.addEventListener('click', ()=>{
  if (selected === null) return;
  if (index+1 < totalQ){ index++; renderQuestion(); window.scrollTo({top:0, behavior:'smooth'}); }
  else finishQuiz();
});

/* finish */
function finishQuiz(){
  quizBox.style.display = 'none';
  resultBox.style.display = 'flex';
  const pct = Math.round((points/totalPts)*100);
  const iq = Math.round((points/totalPts)*100 + 60); // 60..160 mapping
  iqNum.innerText = iq;
  iqPct.innerText = pct + '%';
  correctCountEl.innerText = score;
  let rank = 'Zama Explorer';
  if (points >= Math.round(totalPts*0.8)) rank = 'Zama Mastermind';
  else if (points >= Math.round(totalPts*0.5)) rank = 'FHE Apprentice';
  rankLabelEl.innerText = rank;
  renderGauge(pct);
}

/* render speedometer arc */
function renderGauge(pct){
  const start = -120;
  const sweep = 240 * (pct/100);
  const bgPath = describeArc(60,60,36,start, start+240);
  const fgPath = describeArc(60,60,36,start, start+sweep);
  gaugeSVG.innerHTML = `
    <defs>
      <radialGradient id="g1" cx="50%" cy="30%">
        <stop offset="0%" stop-color="#fff8d6"/>
        <stop offset="60%" stop-color="#fff1a8"/>
        <stop offset="100%" stop-color="${getComputedStyle(document.documentElement).getPropertyValue('--zama-yellow') || '#FFD700'}"/>
      </radialGradient>
      <linearGradient id="arc" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" stop-color="#fff8d6"/>
        <stop offset="100%" stop-color="${getComputedStyle(document.documentElement).getPropertyValue('--zama-yellow') || '#FFD700'}"/>
      </linearGradient>
      <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
        <feGaussianBlur stdDeviation="6" result="coloredBlur" />
        <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
      </filter>
    </defs>
    <path d="${bgPath}" fill="none" stroke="rgba(11,18,32,0.06)" stroke-width="6" stroke-linecap="round"></path>
    <path d="${fgPath}" fill="none" stroke="url(#arc)" stroke-width="6" stroke-linecap="round" filter="url(#glow)"></path>
    <circle cx="60" cy="60" r="36" fill="url(#g1)" opacity="0.12"></circle>
  `;
}

/* arc math helpers */
function polarToCartesian(cx,cy,r,angle){
  const a = (angle - 90) * Math.PI / 180.0;
  return { x: cx + r * Math.cos(a), y: cy + r * Math.sin(a) };
}
function describeArc(cx,cy,r,startAngle,endAngle){
  if (endAngle <= startAngle) return '';
  const start = polarToCartesian(cx,cy,r,endAngle);
  const end = polarToCartesian(cx,cy,r,startAngle);
  const largeArcFlag = endAngle - startAngle <= 180 ? '0' : '1';
  return `M ${start.x} ${start.y} A ${r} ${r} 0 ${largeArcFlag} 0 ${end.x} ${end.y}`;
}

/* share behavior */
shareBtn.addEventListener('click', ()=>{
  const iq = document.getElementById('iqNum').innerText;
  const text = encodeURIComponent(`I just scored ${iq} IQ on the Zama Protocol Quiz! ðŸ§ \nTry it yourself at https://zamaquiz.vercel.app #Zama #FHE #Web3`);
  window.open(`https://twitter.com/intent/tweet?text=${text}`,'_blank');
});

/* retry: go back to intro so user can read intro again */
retryBtn.addEventListener('click', ()=>{
  index = 0; score = 0; points = 0; selected = null;
  quizBox.style.display = 'none';
  resultBox.style.display = 'none';
  intro.style.display = '';
  progEl.style.width = '0%';
});

/* initial state: show intro */
intro.style.display = ''; 
quizBox.style.display = 'none';
resultBox.style.display = 'none';

/* particle motion (gentle) */
(function animateParticles(){
  const parts = document.querySelectorAll('.particle');
  parts.forEach((p,i)=>{
    const dur = 16 + i*4;
    p.animate([
      { transform:'translateY(0) translateX(0) scale(1)' },
      { transform:'translateY(-34px) translateX(18px) scale(1.06)' },
      { transform:'translateY(0) translateX(0) scale(1)' }
    ], { duration: dur*1000, iterations: Infinity, delay: i*400 });
  });
})();
</script>
</body>
</html>
